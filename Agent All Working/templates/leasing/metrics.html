{% extends "base.html" %}

{% block title %}Metrics - Property Management{% endblock %}

{% block content %}
<div class="content-header">
    <h2>Metrics</h2>
</div>

<div class="content-body">
    <!-- Sub-navigation tabs -->
    <ul class="nav nav-tabs mb-3" style="background: white; padding: 10px 10px 0; border-radius: 4px 4px 0 0;">
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('vacancies') }}">Vacancies</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('guest_cards') }}">Guest Cards</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('rental_applications') }}">Rental Applications</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('leases') }}">Leases</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('renewals') }}">Renewals</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="{{ url_for('leasing_metrics') }}">Metrics</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('signals') }}">Signals</a>
        </li>
    </ul>

    <!-- Box Score Summary Tab -->
    <ul class="nav nav-tabs mb-0" style="background: white; padding: 10px 10px 0;">
        <li class="nav-item">
            <a class="nav-link active" href="#" style="border-bottom: 2px solid #0B5394;">Box Score Summary</a>
        </li>
    </ul>

    <!-- NEW Badge Section -->
    <div class="new-feature-banner">
        <div class="d-flex align-items-start">
            <span class="new-badge">NEW</span>
            <div class="ms-3">
                <h5 class="mb-1">Box Score Summary</h5>
                <p class="mb-0 text-muted">View leasing and occupancy information in a consolidated report.</p>
            </div>
            <button class="btn btn-primary ms-auto feedback-btn">
                <i class="far fa-envelope"></i> FEEDBACK
            </button>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="box-score-container">
        <h3 class="box-score-title">Box Score Summary</h3>
        
        <!-- Filter Section -->
        <div class="filter-box">
            <p class="filter-instructions">Apply filters and search to retrieve data for the Box Score Summary.</p>
            
            <div class="filter-form">
                <div class="row mb-3">
                    <div class="col-12">
                        <label class="form-label text-muted small">Search by property or property group</label>
                        <select class="form-select" id="propertySearch">
                            <option value="">Select...</option>
                            <option value="all">All Properties</option>
                            <option value="group">By Property Group</option>
                        </select>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-6">
                        <label class="form-label text-muted small">From *</label>
                        <input type="date" class="form-control" value="08/12/2025">
                    </div>
                    <div class="col-6">
                        <label class="form-label text-muted small">To *</label>
                        <input type="date" class="form-control" value="09/12/2025">
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-12">
                        <label class="form-label text-muted small">Group By *</label>
                        <select class="form-select">
                            <option value="unit_type">Unit Type</option>
                            <option value="property">Property</option>
                            <option value="portfolio">Portfolio</option>
                        </select>
                    </div>
                </div>
                
                <div class="text-center">
                    <button class="btn btn-primary search-btn">Search</button>
                </div>
            </div>
            
            <!-- Arrow pointing down from search box -->
            <div class="search-arrow"></div>
        </div>
        
        <!-- Download Summary -->
        <div class="text-end mt-4">
            <button class="btn btn-link download-btn">
                <i class="fas fa-download"></i> Download Summary
            </button>
        </div>
    </div>

    <!-- Footer Links -->
    <div class="footer-links">
        <a href="#">Privacy</a>
        <span class="divider">|</span>
        <a href="#">Help & Training</a>
        <span class="divider">|</span>
        <a href="#">Make a Suggestion Â»</a>
    </div>
</div>

<style>
    /* Override base.html nav-tabs styles for sub-navigation */
    .content-body .nav-tabs {
        border-bottom: 1px solid #dee2e6;
    }

    .content-body .nav-tabs .nav-link {
        color: #495057;
        background: transparent;
        border: 1px solid transparent;
        border-bottom: none;
        font-size: 13px;
        padding: 8px 16px;
    }

    .content-body .nav-tabs .nav-link:hover {
        border-color: #e9ecef #e9ecef #dee2e6;
        background: #f8f9fa;
    }

    .content-body .nav-tabs .nav-link.active {
        color: #495057;
        background: white;
        border-color: #dee2e6 #dee2e6 white;
        font-weight: 500;
    }

    /* NEW Feature Banner */
    .new-feature-banner {
        background-color: #d1f3e7;
        border: 1px solid #a8e6cf;
        border-radius: 4px;
        padding: 15px 20px;
        margin-bottom: 20px;
    }

    .new-badge {
        background-color: #17a2b8;
        color: white;
        padding: 4px 12px;
        border-radius: 4px;
        font-weight: 600;
        font-size: 12px;
    }

    .feedback-btn {
        background-color: #0B5394;
        border-color: #0B5394;
        font-size: 13px;
        padding: 8px 16px;
    }

    /* Box Score Container */
    .box-score-container {
        background-color: white;
        border-radius: 4px;
        padding: 20px;
    }

    .box-score-title {
        font-size: 18px;
        font-weight: 600;
        color: #212529;
        margin-bottom: 20px;
    }

    /* Filter Box */
    .filter-box {
        border: 2px solid #0B5394;
        border-radius: 8px;
        padding: 25px;
        background-color: white;
        position: relative;
        margin-bottom: 30px;
    }

    .filter-instructions {
        color: #6c757d;
        font-size: 14px;
        margin-bottom: 20px;
    }

    .filter-form .form-label {
        font-size: 12px;
        margin-bottom: 5px;
    }

    .filter-form .form-control,
    .filter-form .form-select {
        font-size: 13px;
        padding: 8px 12px;
    }

    .search-btn {
        background-color: #0B5394;
        border-color: #0B5394;
        padding: 8px 30px;
        font-size: 14px;
    }

    .search-btn:hover {
        background-color: #073763;
        border-color: #073763;
    }

    /* Arrow pointing down from search box */
    .search-arrow {
        position: absolute;
        bottom: -20px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 20px solid transparent;
        border-right: 20px solid transparent;
        border-top: 20px solid #0B5394;
    }

    .search-arrow::before {
        content: '';
        position: absolute;
        top: -22px;
        left: -18px;
        width: 0;
        height: 0;
        border-left: 18px solid transparent;
        border-right: 18px solid transparent;
        border-top: 18px solid white;
    }

    /* Download Button */
    .download-btn {
        color: #0B5394;
        text-decoration: none;
        font-size: 14px;
    }

    .download-btn:hover {
        color: #073763;
        text-decoration: underline;
    }

    /* Footer Links */
    .footer-links {
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #dee2e6;
        text-align: center;
        font-size: 13px;
    }

    .footer-links a {
        color: #0B5394;
        text-decoration: none;
        margin: 0 5px;
    }

    .footer-links a:hover {
        text-decoration: underline;
    }

    .footer-links .divider {
        color: #6c757d;
        margin: 0 5px;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Handle search button
    document.querySelector('.search-btn').addEventListener('click', function() {
        console.log('Searching Box Score Summary...');
        // Add search logic here
    });

    // Handle download button
    document.querySelector('.download-btn').addEventListener('click', function() {
        console.log('Downloading summary...');
        // Add download logic here
    });

    // Handle feedback button
    document.querySelector('.feedback-btn').addEventListener('click', function() {
        console.log('Opening feedback form...');
        // Add feedback logic here
    });
});
</script>
{% endblock %}
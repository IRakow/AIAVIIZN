{% extends "base.html" %}

{% block title %}Metrics - Property Management{% endblock %}
{% block page_title %}Metrics{% endblock %}

{% block extra_css %}
<style>
    /* Metrics specific styles */
    .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .metric-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .metric-card h3 {
        color: #666;
        font-size: 14px;
        margin-bottom: 10px;
    }
    
    .metric-card p {
        font-size: 32px;
        font-weight: bold;
    }
    
    .feedback-section {
        background-color: white;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .feedback-section h2 {
        color: #28a745;
        font-size: 16px;
        margin-bottom: 10px;
    }
</style>
{% endblock %}

{% block tabs %}
<a href="{{ url_for('dashboard') }}" class="tab-nav-item">Dashboard</a>
<a href="{{ url_for('vacancies') }}" class="tab-nav-item">Vacancies</a>
<a href="{{ url_for('guest_cards') }}" class="tab-nav-item">Guest Cards</a>
<a href="{{ url_for('rental_applications') }}" class="tab-nav-item">Rental Applications</a>
<a href="{{ url_for('leases') }}" class="tab-nav-item">Leases</a>
<a href="{{ url_for('renewals') }}" class="tab-nav-item">Renewals</a>
<a href="{{ url_for('leasing_metrics') }}" class="tab-nav-item active">Metrics</a>
{% endblock %}

{% block tasks_panel %}
<!-- Metrics doesn't need tasks panel -->
{% endblock %}

{% block content %}
<div style="background-color: white; padding: 15px; border-radius: 4px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
    <button class="btn btn-info" style="float: right;">ðŸ“§ FEEDBACK</button>
    <h2 style="color: #28a745; font-size: 16px; margin-bottom: 10px;">NEW - Box Score Summary</h2>
    <p>View leasing and occupancy information in a consolidated report.</p>
</div>

<div class="filter-section">
    <h3>Box Score Summary</h3>
    <p>Apply filters and search to retrieve data for the Box Score Summary.</p>
    <form method="get">
        <div class="filter-row">
            <select name="property_filter" style="width: 100%;">
                <option value="">Select...</option>
                <option value="all">All Properties</option>
                <option value="group">By Property Group</option>
            </select>
        </div>
        <div class="filter-row">
            <label>From:</label>
            <input type="date" name="from_date" value="{{ from_date }}">
            <label>To:</label>
            <input type="date" name="to_date" value="{{ to_date }}">
        </div>
        <div class="filter-row">
            <label>Group By:</label>
            <select name="group_by">
                <option value="unit_type">Unit Type</option>
                <option value="property">Property</option>
                <option value="portfolio">Portfolio</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Search</button>
    </form>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #666; font-size: 14px; margin-bottom: 10px;">Total Properties</h3>
        <p style="font-size: 32px; font-weight: bold; color: #007bff;">{{ metrics.total_properties }}</p>
    </div>
    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #666; font-size: 14px; margin-bottom: 10px;">Total Units</h3>
        <p style="font-size: 32px; font-weight: bold; color: #28a745;">{{ metrics.total_units }}</p>
    </div>
    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #666; font-size: 14px; margin-bottom: 10px;">Vacant Units</h3>
        <p style="font-size: 32px; font-weight: bold; color: #dc3545;">{{ metrics.vacant_units }}</p>
    </div>
    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #666; font-size: 14px; margin-bottom: 10px;">Occupancy Rate</h3>
        <p style="font-size: 32px; font-weight: bold; color: #17a2b8;">{{ "%.1f"|format(metrics.occupancy_rate) }}%</p>
    </div>
</div>

<div style="text-align: right; margin-top: 20px;">
    <button class="btn btn-primary" onclick="downloadSummary()">ðŸ“¥ Download Summary</button>
</div>
{% endblock %}

{% block scripts %}
<script>
function downloadSummary() {
    // Implement download logic
    alert('Downloading summary report...');
}
</script>
{% endblock %}
{% extends 'base.html' %}

{% block title %}Dashboard - AIVIIZN{% endblock %}

{% block content %}
<div class="content-header">
    <div class="d-flex justify-content-between align-items-center">
        <h2>Dashboard</h2>
        <div class="d-flex gap-2">
            <select class="form-select form-select-sm" style="width: auto;">
                <option>View By: All</option>
                <option>View By: Property</option>
                <option>View By: Portfolio</option>
            </select>
            <button class="btn btn-sm btn-primary">
                <i class="fas fa-cog"></i> Customize
            </button>
        </div>
    </div>
</div>

<div class="content-body" style="padding: 15px; background: #f8f9fa;">
    <!-- Financial Diagnostics Alert -->
    <div class="alert alert-info alert-dismissible fade show" role="alert" style="background: #d1ecf1; border: 1px solid #bee5eb; font-size: 13px;">
        <i class="fas fa-info-circle"></i>
        Have you checked your Financial Diagnostics Page recently? 
        <a href="{{ url_for('diagnostics') }}" class="alert-link">Click here</a> to check up on your Financial Health. 
        <a href="#" class="alert-link">Remind me in 7 days</a> | 
        <a href="#" class="alert-link">I'm fine... don't show this message again</a>
        <button type="button" class="btn-close" data-bs-dismiss="alert" style="font-size: 10px;"></button>
    </div>

    <!-- Loading Skeleton -->
    <div id="loadingSkeleton" style="display: block;">
        <div class="skeleton-container">
            <div class="skeleton-box" style="height: 200px; margin-bottom: 20px;"></div>
            <div class="skeleton-box" style="height: 150px; margin-bottom: 20px;"></div>
            <div class="skeleton-box" style="height: 300px;"></div>
        </div>
    </div>

    <!-- Main Dashboard Content -->
    <div id="dashboardContent" style="display: none;">
        
        <!-- Move Ins Section -->
        <div class="dashboard-section mb-4">
            <div class="section-header" onclick="toggleSection('moveIns')" style="cursor: pointer; padding: 10px; background: white; border: 1px solid #dee2e6; border-radius: 4px;">
                <span class="section-arrow" style="display: inline-block; transition: transform 0.3s;">▼</span>
                <span class="fw-bold" style="font-size: 14px;">Move Ins</span>
            </div>
            <div id="moveIns" class="section-content" style="background: white; border: 1px solid #dee2e6; border-top: none; padding: 15px;">
                <div class="update-notice" style="background: #e8f4fd; border: 1px solid #bee5eb; padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                    <div class="d-flex align-items-start">
                        <span class="badge bg-info me-2">NEW</span>
                        <div class="flex-grow-1">
                            <strong>Move Ins Updated</strong>
                            <p class="mb-2 mt-2" style="font-size: 13px;">We've added some key information to help track the progress of your move-ins. What additional information would you like to see?</p>
                            <button class="btn btn-sm btn-primary">
                                <i class="fas fa-comment"></i> FEEDBACK
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="search-box text-center mb-3" style="padding: 15px; background: #f8f9fa; border-radius: 4px;">
                    <div style="position: relative; display: inline-block; width: 60%;">
                        <input type="text" class="form-control" placeholder="Search by property, unit or group" style="border-radius: 20px;">
                        <div style="position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid #f8f9fa;"></div>
                    </div>
                </div>

                <div class="table-controls mb-2 d-flex justify-content-between align-items-center">
                    <input type="text" class="form-control form-control-sm" placeholder="Search by property, unit or group" style="width: 300px;">
                    <select class="form-select form-select-sm" style="width: 150px;">
                        <option>Lease Status</option>
                        <option>Active</option>
                        <option>Pending</option>
                    </select>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="showFinished">
                        <label class="form-check-label" for="showFinished" style="font-size: 13px;">
                            Show Finished Move Ins
                        </label>
                    </div>
                </div>
                
                <div class="table-responsive">
                    <table class="table table-sm table-hover" style="font-size: 12px;">
                        <thead style="background: #f8f9fa;">
                            <tr>
                                <th>Future Tenant ↕</th>
                                <th>Property - Unit ↕</th>
                                <th>Lease ↕</th>
                                <th>Portal ↕</th>
                                <th>Balance ↕</th>
                                <th>Insurance</th>
                                <th>Move In Date ↕</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color: #0066cc;">Sainge, Samuel</td>
                                <td>-</td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>$400.00</td>
                                <td><span class="text-danger">Not Covered</span></td>
                                <td>07/25/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Bell, Telia R.</td>
                                <td>-</td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>$0.00</td>
                                <td><span class="text-danger">Not Covered</span></td>
                                <td>08/01/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Carlson, Eric A.</td>
                                <td>Campbell Apartments - 3403 #4</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td class="text-success">-$727.74</td>
                                <td><span class="text-success">Covered</span></td>
                                <td>08/08/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Stivers, Rachel A.</td>
                                <td>Grandview 17 Townhomes / Grandview 17 KC LLC - 13825 A</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td class="text-success">-$930.92</td>
                                <td><span class="text-warning">Pending</span></td>
                                <td>08/08/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Yoder, Julianna R.</td>
                                <td>Villas of Mur-Len / TSI Villas of Mur-Len - 205 U</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td>$807.04</td>
                                <td><span class="text-success">Covered</span></td>
                                <td>08/08/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Ventura Sarmiento, Reiman</td>
                                <td>(BARR) Rock Ridge Ranch Apartments - 59A</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td class="text-success">-$607.74</td>
                                <td><span class="text-success">Covered</span></td>
                                <td>08/08/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Patterson, Shyanne J.</td>
                                <td>Aspen Village Apartments - 3610 #02</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td class="text-success">-$706.40</td>
                                <td><span class="text-warning">Pending</span></td>
                                <td>08/08/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Goodwin, Marcel L.</td>
                                <td>(BARR) Rock Ridge Ranch Apartments - 69A-R</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td class="text-success">-$923.18</td>
                                <td><span class="text-warning">Pending</span></td>
                                <td>08/08/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Harvey, Alahzeyai S.</td>
                                <td>Eaton Apartments / D&T - 3001</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td><span class="badge bg-success">Active</span></td>
                                <td class="text-success">-$927.05</td>
                                <td><span class="text-warning">Pending</span></td>
                                <td>08/08/2025</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Castro, Laura L.</td>
                                <td>Eaton Apartments / D&T - 3043</td>
                                <td><span class="badge bg-primary">Fully Executed</span></td>
                                <td></td>
                                <td>$0.00</td>
                                <td><span class="text-warning">Pending</span></td>
                                <td>08/11/2025</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="d-flex justify-content-between align-items-center mt-2" style="font-size: 12px;">
                    <span>Displaying: 1-10 of 25</span>
                    <div class="pagination-controls">
                        <button class="btn btn-sm btn-outline-secondary" style="padding: 2px 8px;"><<</button>
                        <button class="btn btn-sm btn-outline-secondary" style="padding: 2px 8px;"><</button>
                        <span class="mx-2">1 2 3</span>
                        <button class="btn btn-sm btn-outline-secondary" style="padding: 2px 8px;">></button>
                        <button class="btn btn-sm btn-outline-secondary" style="padding: 2px 8px;">>></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Move Outs Section -->
        <div class="dashboard-section mb-4">
            <div class="section-header" onclick="toggleSection('moveOuts')" style="cursor: pointer; padding: 10px; background: white; border: 1px solid #dee2e6; border-radius: 4px;">
                <span class="section-arrow">▼</span>
                <span class="fw-bold" style="font-size: 14px;">Move Outs</span>
            </div>
            <div id="moveOuts" class="section-content" style="background: white; border: 1px solid #dee2e6; border-top: none; padding: 15px;">
                <div class="table-responsive">
                    <table class="table table-sm table-hover" style="font-size: 12px;">
                        <thead style="background: #f8f9fa;">
                            <tr>
                                <th>Tenant Name ↕</th>
                                <th>Move Out Type ↕</th>
                                <th>Property - Unit ↕</th>
                                <th>Move Out Date ↕</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color: #0066cc;">Jones, Alisa</td>
                                <td>All Tenants</td>
                                <td>Walnut Ridge Apts - 6118-C</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Mitchell, Cameron M.</td>
                                <td>All Tenants</td>
                                <td>Gene Field Apts / DW Gene Field LLC / Ryan Deutsch - 04-07</td>
                                <td>96 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Crawford, Susan</td>
                                <td>All Tenants</td>
                                <td>Homestead Villas 4-Plex - 4838 Terr</td>
                                <td>32 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Wilson, Amelia J.</td>
                                <td>All Tenants</td>
                                <td>Valentine Apartments - 3747 #03</td>
                                <td>7 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Craddock, Jaylen C.</td>
                                <td>All Tenants</td>
                                <td>Aspen Village Apartments - 3610 #04</td>
                                <td>7 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Edwards, Amber L.</td>
                                <td>All Tenants</td>
                                <td>3825 Baltimore - 3827 #02</td>
                                <td>7 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Zhang, Weijie</td>
                                <td>All Tenants</td>
                                <td>Eaton Apartments / D&T - 3003</td>
                                <td>7 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Matthews, Donald</td>
                                <td>All Tenants</td>
                                <td>Longmeadow Apartments - #15B</td>
                                <td>7 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Forson, Kayla</td>
                                <td>All Tenants</td>
                                <td>Walnut Ridge Apts - 6110 1/2 A NW Bell Rd.</td>
                                <td>7 days ago</td>
                            </tr>
                            <tr>
                                <td style="color: #0066cc;">Smothers, Seth T.</td>
                                <td>All Tenants</td>
                                <td>Charlotte Park Apartments - 803 #1E</td>
                                <td>7 days ago</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="d-flex justify-content-between align-items-center mt-2" style="font-size: 12px;">
                    <span>Displaying: 1-10 of 50</span>
                    <div class="pagination-controls">
                        <span class="mx-2">1 2 3 4 5</span>
                        <button class="btn btn-sm btn-outline-secondary" style="padding: 2px 8px;">></button>
                        <button class="btn btn-sm btn-outline-secondary" style="padding: 2px 8px;">>></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Online Payments Section -->
        <div class="dashboard-section mb-4">
            <div class="section-header" onclick="toggleSection('onlinePayments')" style="cursor: pointer; padding: 10px; background: white; border: 1px solid #dee2e6; border-radius: 4px;">
                <span class="section-arrow">▼</span>
                <span class="fw-bold" style="font-size: 14px;">Online Payments</span>
            </div>
            <div id="onlinePayments" class="section-content" style="background: white; border: 1px solid #dee2e6; border-top: none; padding: 20px;">
                <div class="row mb-3">
                    <div class="col-md-12">
                        <h6 style="font-size: 13px; color: #6c757d;">Online Payment Statistics <i class="fas fa-info-circle text-info"></i></h6>
                        <div class="d-flex align-items-center gap-4">
                            <div class="stat-box">
                                <h2 style="color: #0891b2; font-size: 36px; margin: 0;">90%</h2>
                                <p style="font-size: 12px; color: #6c757d; margin: 0;">Payments Collected Online</p>
                                